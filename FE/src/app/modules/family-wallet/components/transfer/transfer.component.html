<div class="transfer-container">
  <div class="transfer-card">
    <div class="transfer-header">
      <h2>Transfer Money to Child</h2>
      <p>Send money from your wallet to a child account</p>
    </div>

    <div class="transfer-body">
      <div *ngIf="wallet" class="balance-info">
        <span class="balance-label">Available Balance:</span>
        <span class="balance-amount">{{ wallet.balance | number:'1.2-2' }} {{ wallet.currency }}</span>
      </div>

      <div *ngIf="message" class="alert alert-success">
        {{ message }}
      </div>
      <div *ngIf="error" class="alert alert-danger">
        {{ error }}
      </div>

      <form (ngSubmit)="transferMoney()">
        <div class="form-group">
          <label>Select Child</label>
          <select
            class="form-control"
            [(ngModel)]="selectedChild"
            name="selectedChild"
            required
          >
            <option [ngValue]="null">-- Select a child --</option>
            <option *ngFor="let member of familyMembers" [ngValue]="member">
              {{ member.full_name || member.email }} ({{ member.email }})
            </option>
          </select>
          <small class="form-text text-muted" *ngIf="selectedChild">
            Selected: {{ selectedChild.full_name || selectedChild.email }} (ID: {{ selectedChild.id || selectedChild.user_id || selectedChild._id }})
          </small>
        </div>

        <div class="form-group">
          <label>Amount (SAR)</label>
          <input
            type="number"
            class="form-control"
            [(ngModel)]="amount"
            name="amount"
            placeholder="0.00"
            min="0.01"
            step="0.01"
            [max]="wallet?.balance"
            required
          />
        </div>

        <div class="form-group">
          <label>Description (Optional)</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="description"
            name="description"
            placeholder="e.g., Allowance for this week"
          />
        </div>

        <div class="form-group">
          <button
            type="submit"
            class="btn btn-primary btn-block"
            [disabled]="loading || !selectedChild || !amount"
          >
            <span *ngIf="!loading">Transfer Money</span>
            <span *ngIf="loading">Processing...</span>
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

