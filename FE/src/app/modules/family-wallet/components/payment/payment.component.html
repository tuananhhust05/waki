<div class="payment-container">
  <div class="payment-card">
    <div class="payment-header">
      <h2>Add Funds</h2>
      <p>Add money to your wallet using Mastercard or Visa</p>
    </div>

    <div class="payment-body">
      <div *ngIf="message" class="alert alert-success">
        {{ message }}
      </div>
      <div *ngIf="error" class="alert alert-danger">
        {{ error }}
      </div>

      <form (ngSubmit)="processPayment()">
        <div class="form-group">
          <label>Amount (SAR)</label>
          <input
            type="number"
            class="form-control"
            [(ngModel)]="paymentForm.amount"
            name="amount"
            placeholder="0.00"
            min="1"
            step="0.01"
            required
          />
        </div>

        <div class="form-group">
          <label>Card Type</label>
          <div class="card-type-selector">
            <button
              type="button"
              class="card-type-btn"
              [class.active]="paymentForm.cardType === 'visa'"
              (click)="paymentForm.cardType = 'visa'"
            >
              <svg width="40" height="25" viewBox="0 0 40 25">
                <rect width="40" height="25" rx="3" fill="#1434CB"/>
                <text x="20" y="16" fill="white" font-size="12" font-weight="bold" text-anchor="middle">VISA</text>
              </svg>
            </button>
            <button
              type="button"
              class="card-type-btn"
              [class.active]="paymentForm.cardType === 'mastercard'"
              (click)="paymentForm.cardType = 'mastercard'"
            >
              <svg width="40" height="25" viewBox="0 0 40 25">
                <rect width="40" height="25" rx="3" fill="#EB001B"/>
                <circle cx="15" cy="12.5" r="8" fill="#F79E1B"/>
                <circle cx="25" cy="12.5" r="8" fill="#FF5F00"/>
              </svg>
            </button>
          </div>
        </div>

        <div class="form-group">
          <label>Card Number</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="paymentForm.cardNumber"
            name="cardNumber"
            placeholder="1234 5678 9012 3456"
            maxlength="19"
            (input)="formatCardNumber($event)"
            required
          />
        </div>

        <div class="form-group">
          <label>Card Holder Name</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="paymentForm.cardHolder"
            name="cardHolder"
            placeholder="JOHN DOE"
            required
          />
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Expiry Date</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="paymentForm.expiryDate"
              name="expiryDate"
              placeholder="MM/YY"
              maxlength="5"
              (input)="formatExpiryDate($event)"
              required
            />
          </div>
          <div class="form-group">
            <label>CVV</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="paymentForm.cvv"
              name="cvv"
              placeholder="123"
              maxlength="4"
              (input)="formatCvv($event)"
              required
            />
          </div>
        </div>

        <div class="form-group">
          <button
            type="submit"
            class="btn btn-primary btn-block"
            [disabled]="loading"
          >
            <span *ngIf="!loading">Process Payment</span>
            <span *ngIf="loading">Processing...</span>
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

